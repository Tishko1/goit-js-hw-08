{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAOC,SAASC,cAAc,kBAChCC,EAAW,IA8BM,SAAAC,GACnB,IAAMC,EAnBW,SAAAC,GACjB,IACE,IAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,E,CACzD,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAcvBC,CAAW,uBAE/B,GADAb,EAAWE,EACPA,EACF,IAAK,IAAMY,KAAQZ,EACjBL,EAAKkB,SAASD,GAAME,MAAQd,EAAYY,E,CAK9CG,GAEApB,EAAKqB,iBACH,SACA,EAAAvB,EAAAwB,WAAS,SAAAlB,GACP,IAAMmB,EAAanB,EAAXmB,OACFC,EAAYD,EAAOE,KACnBC,EAAaH,EAAOJ,MAC1BhB,EAASqB,GAAaE,EA9CT,SAACpB,EAAKa,GACrB,IACE,IAAMZ,EAAkBI,KAAKgB,UAAUR,GAEvCX,aAAaoB,QAAQtB,EAAKC,E,CAC1B,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAyCzCc,CAAS,sBAAuB1B,E,GAC/B,MAGLH,EAAKqB,iBAAiB,UAAU,SAAAjB,GAC9BA,EAAE0B,iBACFhB,QAAQiB,IAAI5B,GAEZH,EAAKgC,QApCc,SAAA1B,GACnB,IACEE,aAAayB,WAAW3B,E,CACxB,MAAOO,GACPC,QAAQiB,IAAI,sBAAuBlB,EAAME,Q,EAiC3CmB,CAAa,sB","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from 'lodash';\n\nconst form = document.querySelector('.feedback-form');\nlet userInfo = {};\n\nconst saveToLS = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst loadFromLS = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst removeFromLS = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.log('Remove item error: ', error.message);\n  }\n};\n\n\nconst fillFormData = e => {\n  const storageData = loadFromLS('feedback-form-state');\n  userInfo = storageData;\n  if (storageData) {\n    for (const prop in storageData) {\n      form.elements[prop].value = storageData[prop];\n    }\n  }\n};\n\nfillFormData();\n\nform.addEventListener(\n  'input',\n  throttle(e => {\n    const { target } = e;\n    const fieldName = target.name;\n    const fieldValue = target.value;\n    userInfo[fieldName] = fieldValue;\n    saveToLS('feedback-form-state', userInfo);\n  }, 500)\n);\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  console.log(userInfo);\n  // userInfo = {};\n  form.reset();\n  removeFromLS('feedback-form-state');\n});\n\n\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$form","document","querySelector","$b00c40859be242c5$var$userInfo","e","storageData","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$b00c40859be242c5$var$loadFromLS","prop","elements","value","$b00c40859be242c5$var$fillFormData","addEventListener","throttle","target","fieldName","name","fieldValue","stringify","setItem","$b00c40859be242c5$var$saveToLS","preventDefault","log","reset","removeItem","$b00c40859be242c5$var$removeFromLS"],"version":3,"file":"03-feedback.b1b90a60.js.map"}